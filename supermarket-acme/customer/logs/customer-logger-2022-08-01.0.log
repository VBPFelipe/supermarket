2022-08-01 22:22:19,425 INFO org.springframework.boot.StartupInfoLogger [main] Starting CustomerApplication using Java 17.0.3.1 on vbpfelipe-Predator-G3-572 with PID 12913 (/home/vbpfelipe/Projetos/UNIESP/Modulo-IV/Projeto/supermarket/supermarket-acme/customer/target/classes started by vbpfelipe in /home/vbpfelipe/Projetos/UNIESP/Modulo-IV/Projeto/supermarket/supermarket-acme)
2022-08-01 22:22:19,427 DEBUG org.springframework.boot.StartupInfoLogger [main] Running with Spring Boot v2.6.0, Spring v5.3.13
2022-08-01 22:22:19,427 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to default profiles: default
2022-08-01 22:22:21,075 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-08-01 22:22:21,200 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 115 ms. Found 1 JPA repository interfaces.
2022-08-01 22:22:21,984 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=f404ffd9-1145-3ad2-9969-b153c556b03a
2022-08-01 22:22:23,604 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8081 (http)
2022-08-01 22:22:23,616 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8081"]
2022-08-01 22:22:23,616 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-08-01 22:22:23,617 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.55]
2022-08-01 22:22:23,733 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-08-01 22:22:23,734 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4196 ms
2022-08-01 22:22:23,979 INFO org.flywaydb.core.internal.logging.slf4j.Slf4jLog [main] Flyway Community Edition 5.2.4 by Boxfuse
2022-08-01 22:22:23,982 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-08-01 22:22:24,075 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-08-01 22:22:24,090 INFO org.flywaydb.core.internal.logging.slf4j.Slf4jLog [main] Database: jdbc:postgresql://localhost:5432/customer (PostgreSQL 9.6)
2022-08-01 22:22:24,144 INFO org.flywaydb.core.internal.logging.slf4j.Slf4jLog [main] Successfully validated 2 migrations (execution time 00:00.018s)
2022-08-01 22:22:24,153 INFO org.flywaydb.core.internal.logging.slf4j.Slf4jLog [main] Current version of schema "public": 2
2022-08-01 22:22:24,154 INFO org.flywaydb.core.internal.logging.slf4j.Slf4jLog [main] Schema "public" is up to date. No migration necessary.
2022-08-01 22:22:24,324 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-08-01 22:22:24,376 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.1.Final
2022-08-01 22:22:24,508 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-08-01 22:22:24,618 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2022-08-01 22:22:25,040 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-08-01 22:22:25,050 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-08-01 22:22:25,993 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-08-01 22:22:26,350 WARN org.springframework.context.support.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'customerController' defined in file [/home/vbpfelipe/Projetos/UNIESP/Modulo-IV/Projeto/supermarket/supermarket-acme/customer/target/classes/br/com/customer/controller/CustomerController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'customerServiceImpl' defined in file [/home/vbpfelipe/Projetos/UNIESP/Modulo-IV/Projeto/supermarket/supermarket-acme/customer/target/classes/br/com/customer/service/CustomerServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 3; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'br.com.rabbitmq.RabbitMQMessageProducer' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-08-01 22:22:26,354 WARN org.springframework.context.support.AbstractApplicationContext [main] Exception thrown from ApplicationListener handling ContextClosedEvent
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'rabbitConnectionFactory': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:264)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:221)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:421)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:427)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1058)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1021)
	at org.springframework.cloud.context.named.NamedContextFactory.destroy(NamedContextFactory.java:96)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:212)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:587)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:559)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1152)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:520)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1106)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:596)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1290)
	at br.com.customer.CustomerApplication.main(CustomerApplication.java:14)
2022-08-01 22:22:26,356 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-08-01 22:22:26,358 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2022-08-01 22:22:26,363 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2022-08-01 22:22:27,364 WARN zipkin2.reporter.AsyncReporter$BoundedAsyncReporter [main] Timed out waiting for in-flight spans to send
2022-08-01 22:22:27,367 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2022-08-01 22:22:27,402 INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener [main] 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-08-01 22:22:27,431 ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 3 of constructor in br.com.customer.service.CustomerServiceImpl required a bean of type 'br.com.rabbitmq.RabbitMQMessageProducer' that could not be found.


Action:

Consider defining a bean of type 'br.com.rabbitmq.RabbitMQMessageProducer' in your configuration.

2022-08-01 22:22:27,434 INFO org.springframework.cloud.sleuth.autoconfig.zipkin2.ZipkinAutoConfiguration$2 [Thread-2] Flushing remaining spans on shutdown
